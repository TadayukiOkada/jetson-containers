#---
# name: robosuite
# group: sim
# depends: [opencv, numba, ffmpeg]
# test: [test.sh, test.py]
#---
ARG BASE_IMAGE
FROM ${BASE_IMAGE}

ADD https://api.github.com/repos/dusty-nv/robosuite/git/refs/heads/master /tmp/robosuite_version.json

RUN git clone --depth=1 --recursive https://github.com/dusty-nv/robosuite /opt/robosuite && \
    apt-get update && \
    apt-get install -y --no-install-recommends libhidapi-dev && \
    rm -rf /var/lib/apt/lists/* && \
    apt-get clean && \
    cd /opt/robosuite && \
    pip3 install --verbose -e . && \
    pip3 install --verbose --no-cache-dir imageio[ffmpeg] pyspacemouse 
